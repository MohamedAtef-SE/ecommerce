import './polyfills.server.mjs';
import{a as D}from"./chunk-C6ZSU5B2.mjs";import{a as G,b as s,c as F,d as V,e as x,f as _,g as T,h as N,i as A,n as I}from"./chunk-E46HLUB7.mjs";import{d as P}from"./chunk-VEAUVYHF.mjs";import"./chunk-STLZQXAZ.mjs";import"./chunk-OPLI5KME.mjs";import{Bb as g,Cb as m,Jb as l,Kb as b,Ob as E,Sa as a,Y as h,ba as y,cb as S,ib as u,kb as p,la as C,ma as w,ob as c,sb as o,tb as r,ub as f,xb as v}from"./chunk-RHIAHIG3.mjs";import"./chunk-VVCT4QZE.mjs";function k(i,d){i&1&&(o(0,"p",8),l(1,"Invalid Email"),r())}function q(i,d){if(i&1){let e=v();o(0,"form",4),g("ngSubmit",function(){C(e);let n=m();return w(n.verifiyEmailSubmit())}),o(1,"div",5),f(2,"input",6),o(3,"button",7),l(4,"Verifiy Email"),r()(),u(5,k,2,0,"p",8),r()}if(i&2){let e,t=m();p("formGroup",t.verifiyEmailGroup),a(3),p("disabled",t.verifiyEmailGroup.invalid),a(2),c(5,(e=t.verifiyEmailGroup.get("email"))!=null&&e.errors&&((e=t.verifiyEmailGroup.get("email"))!=null&&e.touched)?5:-1)}}function R(i,d){if(i&1&&(o(0,"p",9),l(1),r()),i&2){let e=m(2);a(),b(e.message())}}function U(i,d){i&1&&(o(0,"p",8),l(1,"Invalid Code"),r())}function j(i,d){if(i&1){let e=v();o(0,"form",4),g("ngSubmit",function(){C(e);let n=m();return w(n.verifiyCodeSubmit())}),u(1,R,2,1,"p",9),o(2,"div",5),f(3,"input",10),o(4,"button",7),l(5,"Verifiy Code"),r()(),u(6,U,2,0,"p",8),r()}if(i&2){let e,t=m();p("formGroup",t.verifiyCodeGroup),a(),c(1,t.message()!==null?1:-1),a(3),p("disabled",t.verifiyCodeGroup.invalid),a(2),c(6,(e=t.verifiyCodeGroup.get("resetCode"))!=null&&e.errors&&((e=t.verifiyCodeGroup.get("resetCode"))!=null&&e.touched)?6:-1)}}function M(i,d){i&1&&(o(0,"p",8),l(1,"Invalid Email"),r())}function $(i,d){i&1&&(o(0,"p",8),l(1,"Invalid Password"),r())}function z(i,d){if(i&1){let e=v();o(0,"form",4),g("ngSubmit",function(){C(e);let n=m();return w(n.resetUserPasswordSubmit())}),o(1,"div",5),f(2,"input",11),r(),u(3,M,2,0,"p",8),o(4,"div",5),f(5,"input",12),r(),u(6,$,2,0,"p",8),o(7,"button",13),l(8,"Submit"),r()()}if(i&2){let e,t,n=m();p("formGroup",n.resetPasswordGroup),a(3),c(3,(e=n.resetPasswordGroup.get("email"))!=null&&e.errors&&((e=n.resetPasswordGroup.get("email"))!=null&&e.touched)?3:-1),a(3),c(6,(t=n.resetPasswordGroup.get("newPassword"))!=null&&t.errors&&((t=n.resetPasswordGroup.get("newPassword"))!=null&&t.touched)?6:-1),a(),p("disabled",n.resetPasswordGroup.invalid)}}var W=(()=>{class i{constructor(){this.step=S(1),this.message=S(null),this._AuthService=h(D),this._Router=h(P),this.verifiyEmailGroup=new x({email:new _(null,[s.required,s.email])}),this.verifiyCodeGroup=new x({resetCode:new _(null,[s.required,s.pattern(/^[0-9]{6}$/)])}),this.resetPasswordGroup=new x({email:new _(null,[s.required,s.email]),newPassword:new _(null,[s.required,s.pattern(/^\w{6,}$/)])})}verifiyEmailSubmit(){this.verifiyEmailSubcribe=this._AuthService.setVerifiyEmail(this.verifiyEmailGroup.value).subscribe({next:e=>{this.message.set(e.message),this.counter()}})}verifiyCodeSubmit(){this.verifiyCodeSubcribe=this._AuthService.setVerifiyCode(this.verifiyCodeGroup.value).subscribe({next:e=>{let t=this.verifiyEmailGroup.get("email")?.value;this.resetPasswordGroup.get("email")?.patchValue(t),e.status=="Success"&&this.counter()}})}resetUserPasswordSubmit(){this.changePasswordSubcribe=this._AuthService.resetUserPassword(this.resetPasswordGroup.value).subscribe({next:e=>{e.token!==null&&(localStorage.setItem("userToken",e.token),this._AuthService.setUserData(),this._Router.navigate(["home"]))}})}counter(){this.step.update(e=>e+1)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-forget-password"]],standalone:!0,features:[E],decls:7,vars:1,consts:[[1,"container","my-4"],[1,"text-main","mb-3"],[1,"w-75","d-flex","justify-content-center","align-items-center","mx-auto","shadow","rounded","p-4"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"my-2","d-flex","justify-content-between","align-items-center"],["formControlName","email","type","text","id","email","placeholder","Email",1,"form-control","me-3"],[1,"btn-main","text-nowrap",3,"disabled"],[1,"text-danger","my-2","fw-bold"],[1,"alert-success","mb-3","alert"],["formControlName","resetCode","type","text","id","code","placeholder","Code",1,"form-control","me-3"],["readonly","","formControlName","email","type","text","id","email","placeholder","Email",1,"form-control","me-3"],["formControlName","newPassword","type","password","id","password","placeholder","Enter new password",1,"form-control","me-3"],[1,"btn-main","my-3","d-block","ms-auto",3,"disabled"]],template:function(t,n){t&1&&(o(0,"section",0)(1,"h1",1),l(2,"Forget Password?"),r(),o(3,"div",2),u(4,q,6,3,"form",3)(5,j,7,4)(6,z,9,4),r()()),t&2&&(a(4),c(4,n.step()==1?4:n.step()==2?5:n.step()==3?6:-1))},dependencies:[I,T,G,F,V,N,A]})}}return i})();export{W as ForgetPasswordComponent};
