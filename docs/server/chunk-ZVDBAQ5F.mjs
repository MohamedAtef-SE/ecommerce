import './polyfills.server.mjs';
import{a as w}from"./chunk-7HRUJERT.mjs";import{e as U}from"./chunk-VEAUVYHF.mjs";import{c as S,d as g}from"./chunk-JC33AN3A.mjs";import{a as V}from"./chunk-TUFFLGTC.mjs";import"./chunk-STLZQXAZ.mjs";import"./chunk-J4BDXTMW.mjs";import{r as y}from"./chunk-OPLI5KME.mjs";import{Bb as d,Cb as I,Jb as s,Kb as u,Lb as C,Mb as O,Oa as E,Ob as h,Pb as L,Sa as n,Tb as c,Ub as m,Vb as x,Y as b,ba as v,cb as _,ib as F,kb as p,la as k,ma as T,ob as B,qb as P,rb as j,rc as Q,sb as a,tb as o,ub as l,xb as M}from"./chunk-RHIAHIG3.mjs";import"./chunk-VVCT4QZE.mjs";var q=(()=>{class i{constructor(){this.cartDetails=_({}),this.CartItem={},this._CartService=b(w),this._ToastrService=b(V)}removeCartItem(e){this.CartSubscribe=this._CartService.removeCartItem(e).subscribe({next:r=>{this._ToastrService.success("Item removed successfully","Amazon"),this.cartDetails.update(()=>r),this._CartService.NumberOfCartItems.next(r.numOfCartItems),r.numOfCartItems===0&&this._CartService.IsCartFound.set(!1)}})}increaseQuantity(e,r){this._CartService.quantityIncrease(e,r).subscribe({next:t=>{this.cartDetails.update(()=>t)}})}decreaseQuantity(e,r){this._CartService.quantityDecrease(e,r).subscribe({next:t=>{this.cartDetails.update(()=>t)}})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-cart-item"]],inputs:{cartDetails:"cartDetails",CartItem:"CartItem"},standalone:!0,features:[h],decls:27,vars:18,consts:[[1,"row","my-2","py-2","border","rounded","align-items-center","justify-content-between"],[1,"col-md-2","position-relative"],[1,"w-100","rounded",3,"src","alt"],[1,"col-md-8"],[1,"text-main","my-2"],[1,"text-muted","my-2"],[1,"text-muted","fw-bolder"],[1,"my-2","fw-bolder"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","my-2","small","btn-secondary",3,"click"],[1,"bi","bi-trash-fill"],[1,"col-md-2","d-flex","justify-content-between","align-items-center"],[1,"btn-main","py-1","px-2",3,"click"],[1,"p-0","fw-bold","bg-white","w-100","text-center","m-0"],[1,"btn-main","py-1","px-2",3,"click","disabled"]],template:function(r,t){r&1&&(a(0,"div",0)(1,"div",1),l(2,"img",2),o(),a(3,"div",3)(4,"h6",4),s(5),c(6,"translate"),o(),a(7,"h5",5),s(8),o(),a(9,"h6",6),s(10),c(11,"translate"),o(),a(12,"h5",7),s(13),c(14,"currency"),o(),a(15,"div",8)(16,"button",9),d("click",function(){return t.removeCartItem(t.CartItem.product.id)}),s(17),c(18,"translate"),l(19,"i",10),o()()(),a(20,"div",11)(21,"button",12),d("click",function(){return t.increaseQuantity(t.CartItem.product.id,t.CartItem.count)}),s(22,"+"),o(),a(23,"p",13),s(24),o(),a(25,"button",14),d("click",function(){return t.decreaseQuantity(t.CartItem.product.id,t.CartItem.count)}),s(26,"-"),o()()()),r&2&&(n(2),p("src",t.CartItem.product.imageCover,E)("alt",t.CartItem.product.title),n(3),u(m(6,9,t.CartItem.product.category.name.toLowerCase())),n(3),u(t.CartItem.product.title),n(2),u(m(11,11,t.CartItem.product.brand.name.toLowerCase())),n(3),u(x(14,13,t.CartItem.price,"GBP")),n(4),C(" ",m(18,16,"remove")," "),n(7),u(t.CartItem.count),n(),p("disabled",t.CartItem.count==1))},dependencies:[y,g,S]})}}return i})();var N=(i,f)=>f._id,$=i=>["/checkout",i];function A(i,f){if(i&1&&l(0,"app-cart-item",6),i&2){let e=f.$implicit,r=I(2);p("cartDetails",r.CartDetails)("CartItem",e)}}function R(i,f){if(i&1){let e=M();a(0,"div",1)(1,"p",2),s(2),c(3,"translate"),c(4,"currency"),o(),a(5,"div")(6,"a",3),s(7),c(8,"translate"),o(),a(9,"button",4),d("click",function(){k(e);let t=I();return T(t.clearCart())}),s(10),c(11,"translate"),l(12,"i",5),o()()(),P(13,A,1,2,"app-cart-item",6,N)}if(i&2){let e=I();n(2),O("",m(3,5,"total cost")," ",x(4,7,e.CartDetails().data.totalCartPrice,"GBP"),""),n(4),p("routerLink",L(14,$,e.CartDetails().cartId)),n(),C(" ",m(8,10,"checkout session")," "),n(3),C(" ",m(11,12,"clear cart")," "),n(3),j(e.CartDetails().data.products)}}function H(i,f){i&1&&(a(0,"div",7)(1,"p",8),s(2),c(3,"translate"),l(4,"i",9),o()()),i&2&&(n(2),C("",m(3,1,"cart is empty")," "))}var mt=(()=>{class i{constructor(){this._CartService=b(w),this.CartDetails=_({}),this.isCartFound=Q(()=>this._CartService.IsCartFound())}ngOnInit(){this.CartSubscribe=this._CartService.getUserCart().subscribe({next:e=>{this.CartDetails.set(e),e.status=="success"&&this._CartService.IsCartFound.set(!0),e.data.products.length==0&&this._CartService.IsCartFound.set(!1)}})}clearCart(){this.CartSubscribe=this._CartService.clearUserCart().subscribe({next:e=>{e.message==="success"&&(this.CartDetails.set({}),this._CartService.NumberOfCartItems.next(0),this._CartService.IsCartFound.set(!1))}})}ngOnDestroy(){this.CartSubscribe?.unsubscribe(),this.ProductsSubscribe?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-cart"]],standalone:!0,features:[h],decls:3,vars:1,consts:[[1,"container","p-5","my-4","bg-body-tertiary","rounded","border","shadow"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-end","text-main","fw-bolder","h5"],[1,"btn","btn-warning","fw-bolder","mx-3",3,"routerLink"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-trash"],[3,"cartDetails","CartItem"],[1,"d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"text-muted","h2"],[1,"bi","bi-bag","h1"]],template:function(r,t){r&1&&(a(0,"section",0),F(1,R,15,16)(2,H,5,3),o()),r&2&&(n(),B(1,t.isCartFound()?1:2))},dependencies:[y,U,q,g,S]})}}return i})();export{mt as CartComponent};
