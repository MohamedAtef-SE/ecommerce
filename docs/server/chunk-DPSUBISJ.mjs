import './polyfills.server.mjs';
import{a as Q}from"./chunk-XNZQH4ET.mjs";import{a as $,b as p,c as j,d as k,g as z,h as H,i as J,l as K,n as O}from"./chunk-DNVD4XI6.mjs";import{d as D}from"./chunk-BDCOU3OE.mjs";import{c as G,d as M}from"./chunk-CWD4Y3IP.mjs";import{a as V}from"./chunk-BTVMAN4S.mjs";import"./chunk-STLZQXAZ.mjs";import"./chunk-J4BDXTMW.mjs";import{h as A}from"./chunk-3N76YTD7.mjs";import{Ab as x,Hb as l,Ib as v,Jb as q,Mb as I,Ob as w,Ra as n,Rb as C,Sb as F,Y as S,aa as B,gb as m,ib as g,mb as d,qb as o,rb as r,sb as E,zb as L}from"./chunk-7POIXPXD.mjs";import"./chunk-VVCT4QZE.mjs";var R=(e,s)=>({"is-valid":e,"is-invalid":s});function U(e,s){e&1&&(o(0,"p",13),l(1,"name is required"),r())}function W(e,s){e&1&&(o(0,"p",13),l(1,"minimum length 3 chars"),r())}function X(e,s){e&1&&(o(0,"p",13),l(1,"maximum length 20 chars"),r())}function Y(e,s){if(e&1&&m(0,U,2,0,"p",13)(1,W,2,0)(2,X,2,0),e&2){let i,a=x();d(0,(i=a.registerForm.get("name"))!=null&&i.getError("required")?0:(i=a.registerForm.get("name"))!=null&&i.getError("minlength")?1:(i=a.registerForm.get("name"))!=null&&i.getError("maxlength")?2:-1)}}function Z(e,s){e&1&&(o(0,"p",13),l(1,"email is required"),r())}function ee(e,s){e&1&&(o(0,"p",13),l(1,"invalid email address"),r())}function te(e,s){if(e&1&&m(0,Z,2,0,"p",13)(1,ee,2,0),e&2){let i,a=x();d(0,(i=a.registerForm.get("email"))!=null&&i.getError("required")?0:(i=a.registerForm.get("email"))!=null&&i.getError("email")?1:-1)}}function ie(e,s){e&1&&(o(0,"p",13),l(1,"password is required"),r())}function re(e,s){e&1&&(o(0,"p",13),l(1,"minimum length 6 chars"),r())}function ne(e,s){if(e&1&&m(0,ie,2,0,"p",13)(1,re,2,0),e&2){let i,a=x();d(0,(i=a.registerForm.get("password"))!=null&&i.getError("required")?0:(i=a.registerForm.get("password"))!=null&&i.getError("pattern")?1:-1)}}function oe(e,s){e&1&&(o(0,"p",13),l(1,"Password Confirm is incorrect"),r())}function le(e,s){e&1&&(o(0,"p",13),l(1,"phone is required"),r())}function ae(e,s){e&1&&(o(0,"p",13),l(1,"invalid egyptian phone number"),r())}function se(e,s){if(e&1&&m(0,le,2,0,"p",13)(1,ae,2,0),e&2){let i,a=x();d(0,(i=a.registerForm.get("phone"))!=null&&i.getError("required")?0:(i=a.registerForm.get("phone"))!=null&&i.getError("pattern")?1:-1)}}function me(e,s){e&1&&(o(0,"div",18)(1,"span",19),l(2,"Loading..."),r()())}var Ee=(()=>{class e{constructor(){this._authService=S(Q),this._formBuilder=S(K),this._ToastrService=S(V),this._Router=S(D),this.isLoading=!1,this.registerForm=this._formBuilder.group({name:[null,[p.required,p.minLength(3),p.maxLength(20)]],email:[null,[p.required,p.email]],password:[null,[p.required,p.pattern(/^\w{6,}$/)]],rePassword:[null],phone:[null,[p.required,p.pattern(/^01[0125][0-9]{8}$/)]]},{validators:[this.confirmPassword]})}confirmPassword(i){return i.get("password")?.value===i.get("rePassword")?.value?null:{mismatch:!0}}registerSubmit(){this.isLoading=!0,this.registerForm.valid?this._authService.setRegisterForm(this.registerForm.value).subscribe({next:i=>{i.message==="success"&&this._Router.navigate(["/login"]),this.msgError=void 0,this.isLoading=!1},error:i=>{this._ToastrService.error(i.message),this.isLoading=!1}}):(this.registerForm.setErrors({mismatch:!0}),this.isLoading=!1,this.registerForm.markAllAsTouched())}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=B({type:e,selectors:[["app-register"]],standalone:!0,features:[I],decls:42,vars:51,consts:[[1,"bg-main-light","p-5","shadow","my-2","rounded-4","container","my-5"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"alert","alert-danger",3,"hidden"],[1,"my-2"],["for","name"],["formControlName","name","id","name","type","text",1,"form-control",3,"ngClass"],["for","email"],["formControlName","email","id","email","type","text",1,"form-control",3,"ngClass"],["for","password"],["formControlName","password","id","password","type","password",1,"form-control",3,"ngClass"],["for","rePassword"],["formControlName","rePassword","id","rePassword","type","password",1,"form-control",3,"ngClass"],[1,"text-danger"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control",3,"ngClass"],[1,"text-end"],[1,"btn-main","mt-3",3,"disabled"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(a,t){if(a&1&&(o(0,"section",0)(1,"h1",1),l(2),C(3,"translate"),r(),o(4,"form",2),L("ngSubmit",function(){return t.registerSubmit()}),o(5,"p",3),l(6),r(),o(7,"div",4)(8,"label",5),l(9),C(10,"translate"),r(),E(11,"input",6),m(12,Y,3,1),r(),o(13,"div",4)(14,"label",7),l(15),C(16,"translate"),r(),E(17,"input",8),m(18,te,2,1),r(),o(19,"div",4)(20,"label",9),l(21),C(22,"translate"),r(),E(23,"input",10),m(24,ne,2,1),r(),o(25,"div",4)(26,"label",11),l(27),C(28,"translate"),r(),E(29,"input",12),m(30,oe,2,0,"p",13),r(),o(31,"div",4)(32,"label",14),l(33),C(34,"translate"),r(),E(35,"input",15),m(36,se,2,1),r(),o(37,"div",16)(38,"button",17),l(39),C(40,"translate"),m(41,me,3,0,"div",18),r()()()()),a&2){let u,T,_,y,c,b,f,N,h,P;n(2),q("",F(3,22,"register now"),":"),n(2),g("formGroup",t.registerForm),n(),g("hidden",t.msgError===void 0),n(),v(t.msgError),n(3),v(F(10,24,"name")),n(2),g("ngClass",w(36,R,!((u=t.registerForm.get("name"))!=null&&u.errors)&&((u=t.registerForm.get("name"))==null?null:u.touched),((u=t.registerForm.get("name"))==null?null:u.errors)&&((u=t.registerForm.get("name"))==null?null:u.touched))),n(),d(12,(T=t.registerForm.get("name"))!=null&&T.errors&&((T=t.registerForm.get("name"))!=null&&T.touched)?12:-1),n(3),v(F(16,26,"email")),n(2),g("ngClass",w(39,R,!((_=t.registerForm.get("email"))!=null&&_.errors)&&((_=t.registerForm.get("email"))==null?null:_.touched),((_=t.registerForm.get("email"))==null?null:_.errors)&&((_=t.registerForm.get("email"))==null?null:_.touched))),n(),d(18,(y=t.registerForm.get("email"))!=null&&y.errors&&((y=t.registerForm.get("email"))!=null&&y.touched)?18:-1),n(3),v(F(22,28,"password")),n(2),g("ngClass",w(42,R,!((c=t.registerForm.get("password"))!=null&&c.errors)&&((c=t.registerForm.get("password"))==null?null:c.touched),((c=t.registerForm.get("password"))==null?null:c.errors)&&((c=t.registerForm.get("password"))==null?null:c.touched))),n(),d(24,(b=t.registerForm.get("password"))!=null&&b.errors&&((b=t.registerForm.get("password"))!=null&&b.touched)?24:-1),n(3),v(F(28,30,"re-password")),n(2),g("ngClass",w(45,R,!((f=t.registerForm.get("rePassword"))!=null&&f.errors)&&((f=t.registerForm.get("rePassword"))==null?null:f.touched),((f=t.registerForm.get("rePassword"))==null?null:f.errors)&&((f=t.registerForm.get("rePassword"))==null?null:f.touched))),n(),d(30,t.registerForm.getError("mismatch")&&((N=t.registerForm.get("rePassword"))!=null&&N.touched)?30:-1),n(3),v(F(34,32,"phone")),n(2),g("ngClass",w(48,R,!((h=t.registerForm.get("phone"))!=null&&h.errors)&&((h=t.registerForm.get("phone"))==null?null:h.touched),((h=t.registerForm.get("phone"))==null?null:h.errors)&&((h=t.registerForm.get("phone"))==null?null:h.touched))),n(),d(36,(P=t.registerForm.get("phone"))!=null&&P.errors&&((P=t.registerForm.get("phone"))!=null&&P.touched)?36:-1),n(2),g("disabled",t.registerForm.invalid),n(),q(" ",F(40,34,"register")," "),n(2),d(41,t.isLoading?41:-1)}},dependencies:[O,z,$,j,k,H,J,A,M,G]})}}return e})();export{Ee as RegisterComponent};
